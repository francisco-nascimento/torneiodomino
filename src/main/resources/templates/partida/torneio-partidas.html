<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org">

<head th:replace="index :: header">
<body>

	<nav th:replace="home :: menu"></nav>

	<main>

			<fieldset class="col s6" th:if="${torneio.codigo != null}">
				<div th:text="${torneio.nome}"></div>
				<a class="btn waves-effect"
					th:href="|/admin/gerarPartidas?codigo=${torneio.codigo}|">
					Gerar Partidas</a> &nbsp; <a class="btn waves-effect"
					th:href="|/admin/iniciarTorneio?codigo=${torneio.codigo}|">Iniciar
					Torneio</a> <a class="btn waves-effect"
					th:href="|/admin/zerarPartidas?codigo=${torneio.codigo}|">
					Remover as partidas</a>
					 <br />
				<div th:if="${msg != null}">
					<div th:text="${msg}" class="invalid waves-effect waves-light"></div>

				</div>


			</fieldset>
		<div class="row">
			<div class="col s12">
				<ul class="tabs" id="tabs-swipe-demo">
					<li class="tab col s6"><a class="active" href="#test1">Partidas</a></li>
					<li class="tab col s6"><a href="#test2">Classificação</a></li>
				</ul>
			</div>
			<div id="test1" class="col s6">

				<table class="striped col centered">
					<thead>
						<tr>
							<th>###</th>
							<th>Dupla 01</th>
							<th>Placar</th>
							<th>Dupla 02</th>
						</tr>
					</thead>

					<tbody th:if="${torneio.isPartidasIniciadas}">
						<tr th:if="${msg2 != null}">
							<td colspan="4" th:text="${msg2}"
								class="waves-effect waves-light"></td>
						</tr>
						<tr th:each="part : ${listaPartidas}">
							<td th:text="${part.codigo}"></td>
							<td><span th:text="${part.dupla1.jogador1.nome}"></span><br />
								<span th:text="${part.dupla1.jogador2.nome}"></span><br /></td>
							<td style="width: 40px">
								<div class="row" th:if="${part.placar1 == null}">
									<form action="/admin/registrarPlacar" method="post">
										<input type="hidden" name="codigo" th:value="${part.codigo}" />
										<select name="placar1" th:value="${part.placar1}">
											<option th:each="i : ${#numbers.sequence(0, 9)}"
												th:value="${i}" th:text="${i}"></option>
										</select>X<select name="placar2" th:value="${part.placar2}">
											<option th:each="i : ${#numbers.sequence(0, 9)}"
												th:value="${i}" th:text="${i}"></option>
										</select>
										<button type="submit">OK</button>
									</form>
								</div>
								<div th:if="${part.placar1 != null}" th:text="|${part.placar1} x ${part.placar2}|">
								</div>
							</td>
							<td><span th:text="${part.dupla2.jogador1.nome}"></span><br />
								<span th:text="${part.dupla2.jogador2.nome}"></span><br /></td>
						</tr>
					</tbody>

					<tbody th:if="${!torneio.isPartidasIniciadas}">
						<tr th:each="part : ${listaPartidas}">
							<td th:text="${part.codigo}"></td>
							<td><span th:text="${part.dupla1.jogador1.nome}"></span><br />
								<span th:text="${part.dupla1.jogador2.nome}"></span><br /></td>
							<td class="input-field col" style="width: 40px">
								<div class="row">
									<form action="/admin/registrarPlacar" method="post">
										<input type="hidden" name="codigo" th:value="${part.codigo}" />
										<select name="placar1">
											<option th:each="i : ${#numbers.sequence(0, 9)}"
												th:value="${i}" th:text="${i}"></option>
										</select>X<select name="placar2" th:value="${part.placar2}">
											<option th:each="i : ${#numbers.sequence(0, 9)}"
												th:value="${i}" th:text="${i}"></option>
										</select>
										<button type="submit">OK</button>
									</form>

								</div>
							</td>
							<td><span th:text="${part.dupla2.jogador1.nome}"></span><br />
								<span th:text="${part.dupla2.jogador2.nome}"></span><br /></td>
						</tr>
					</tbody>

				</table>
			</div>
			<div class="col s12">

				<table id="test2" class="striped col s12">
					<thead>
						<tr>
							<th>###</th>
							<th>Dupla</th>
							<th>Pontuação</th>
						</tr>
					</thead>

					<tbody>
						<tr th:each="dupla, iter : ${classificacao}">
							<td th:text="${iter.index + 1}"></td>
							<td><span th:text="${dupla.jogador1.nome}"></span><br /> <span
								th:text="${dupla.jogador2.nome}"></span><br /></td>
							<td th:text="${dupla.pontuacao}"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</main>
</body>
</html>